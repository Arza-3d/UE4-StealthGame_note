#include "FPSAIGuard.h"
#include "Perception/PawnSensingComponent.h"
///////////////////////////////1a
// NEW: draw debug
#include "DrawDebugHelpers.h"
///////////////////////////////1z

AFPSAIGuard::AFPSAIGuard()
{
	PawnSensingComp = CreateDefaultSubobject<UPawnSensingComponent>(TEXT("PawnSensingComp"));

	///////////////////////////////////////////////////////////////////////////2a
	// NEW: bind function to OnSeePawn event
	PawnSensingComp->OnSeePawn.AddDynamic(this, &AFPSAIGuard::OnPawnSeen);
	///////////////////////////////////////////////////////////////////////////2b
}

//////////////////////////////////////////////////////////////////////////////////////////////////////3a
void AFPSAIGuard::OnPawnSeen(APawn* SeenPawn)
{
	if (SeenPawn == nullptr)
	{
		return;
	}
	DrawDebugSphere(GetWorld(), SeenPawn->GetActorLocation(), 32.0f, 12, FColor::Red, false, 10.0f);
}
//////////////////////////////////////////////////////////////////////////////////////////////////////3z
